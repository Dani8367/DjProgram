<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Clone</title>
    <!-- Връзка към шрифта Roboto от Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* CSS променливи за лесно управление на темите */
        :root {
            --primary-bg: #ffffff;
            --secondary-bg: #f2f2f2;
            --search-bg: #f8f9fa;
            --text-color: #202124;
            --border-color: #dadce0; /* По-мек цвят на рамката */
            --hover-color: #f0f0f0;
            --accent-color: #1a73e8; /* Основен акцентен цвят */
            --feedback-bg: #f8f9fa;
            --card-bg: #ffffff;
            --shadow: 0 1px 6px rgba(32,33,36,0.1); /* По-изразен сянка */
            --button-shadow: 0 1px 1px rgba(0,0,0,0.1);
        }

        /* Тъмен режим */
        .dark-mode {
            --primary-bg: #202124;
            --secondary-bg: #171717;
            --search-bg: #303134;
            --text-color: #e8eaed;
            --border-color: #5f6368;
            --hover-color: #3c4043; /* По-тъмен цвят на преместване */
            --accent-color: #8ab4f8;
            --feedback-bg: #303134;
            --card-bg: #303134;
            --shadow: 0 1px 6px rgba(0,0,0,0.3);
            --button-shadow: 0 1px 1px rgba(0,0,0,0.3);
        }

        /* Основни стилове на тялото */
        body {
            font-family: 'Roboto', Arial, sans-serif; /* Използване на Roboto */
            background-color: var(--primary-bg);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s, color 0.3s;
            line-height: 1.6; /* По-добра четимост */
        }
        
        /* Стилизиране на хедъра */
        .header {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            padding: 16px;
            gap: 18px; /* По-голямо разстояние между елементите */
        }
        
        /* Стилизиране на навигационните връзки */
        .nav-link {
            text-decoration: none;
            color: var(--text-color);
            font-size: 14px;
            padding: 8px 12px; /* По-голям тапинг зона */
            border-radius: 4px;
            transition: background-color 0.2s, color 0.2s;
        }
        
        .nav-link:hover {
            background-color: var(--hover-color);
            color: var(--accent-color);
            text-decoration: none; /* Премахване на подчертаването при hover */
        }

        /* Превключвател на тема */
        #themeToggle {
            background: none;
            border: none;
            font-size: 22px; /* По-голям размер на иконата */
            cursor: pointer;
            color: var(--text-color);
            padding: 8px;
            border-radius: 50%;
            transition: background-color 0.2s;
        }

        #themeToggle:hover {
            background-color: var(--hover-color);
        }
        
        /* Основно съдържание */
        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
            padding: 20px;
        }
        
        /* Лого */
        .logo {
            margin-bottom: 30px; /* По-голямо разстояние */
            text-align: center;
        }

        .logo img {
            max-width: 100%;
            height: auto;
            transition: transform 0.3s ease;
        }

        .logo:hover img {
            transform: scale(1.03); /* По-малко увеличение при hover */
        }
        
        /* Контейнер за търсене */
        .search-container {
            width: 100%;
            max-width: 600px; /* По-широк контейнер */
            position: relative;
        }
        
        /* Поле за търсене */
        .search-box {
            display: flex;
            align-items: center;
            border: 1px solid var(--border-color);
            border-radius: 28px; /* По-заоблени ъгли */
            padding: 10px 20px; /* По-голям padding */
            margin-bottom: 25px;
            background-color: var(--primary-bg);
            box-shadow: var(--shadow); /* Прилагане на сянката */
            transition: box-shadow 0.3s, border-color 0.3s;
        }
        
        .search-box:hover {
            box-shadow: 0 1px 8px rgba(32,33,36,0.15); /* По-изразена сянка при hover */
            border-color: rgba(32,33,36,0.15);
        }

        .search-box:focus-within {
            box-shadow: 0 1px 8px rgba(32,33,36,0.2);
            border-color: var(--accent-color); /* Акцентен цвят при фокус */
        }
        
        .search-input {
            flex-grow: 1;
            border: none;
            outline: none;
            font-size: 16px;
            padding: 5px 8px; /* Намален padding за input */
            background-color: transparent;
            color: var(--text-color);
        }

        /* Предложения за търсене */
        .suggestions {
            position: absolute;
            width: 100%;
            background: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-top: none; /* Без горна рамка */
            border-radius: 0 0 12px 12px; /* По-заоблени долни ъгли */
            box-shadow: var(--shadow);
            z-index: 100;
            display: none;
            max-height: 300px;
            overflow-y: auto;
        }

        .suggestion-item {
            padding: 12px 20px; /* По-голям padding */
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .suggestion-item:hover {
            background-color: var(--hover-color);
        }
        
        /* Бутони за търсене */
        .search-buttons {
            display: flex;
            justify-content: center;
            gap: 15px; /* По-голямо разстояние */
            margin-bottom: 30px;
        }
        
        .search-btn {
            background-color: var(--search-bg);
            border: 1px solid transparent;
            border-radius: 6px; /* По-заоблени ъгли */
            padding: 10px 20px; /* По-голям padding */
            cursor: pointer;
            color: var(--text-color);
            transition: all 0.2s;
            font-size: 14px;
            box-shadow: var(--button-shadow);
        }
        
        .search-btn:hover {
            border: 1px solid var(--border-color);
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
            background-color: var(--hover-color);
        }

        /* Опции за търсене */
        .search-options {
            display: flex;
            justify-content: center;
            gap: 25px; /* По-голямо разстояние */
            margin-bottom: 20px;
            font-size: 14px;
            flex-wrap: wrap;
        }

        /* Бързи връзки */
        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); /* Адаптивни колони */
            gap: 25px;
            margin-top: 40px;
            max-width: 700px; /* По-широка зона */
            width: 100%;
        }

        .quick-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-color);
            padding: 15px 10px; /* По-голям padding */
            border-radius: 12px; /* По-заоблени ъгли */
            transition: all 0.2s;
            background-color: var(--card-bg);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05); /* Лека сянка */
        }

        .quick-link:hover {
            background-color: var(--hover-color);
            transform: translateY(-3px); /* По-изразен ефект */
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .quick-link img {
            width: 48px; /* По-голям размер на иконите */
            height: 48px;
            margin-bottom: 10px;
            border-radius: 50%;
            transition: transform 0.3s;
        }

        .quick-link span {
            font-size: 13px;
            text-align: center;
            font-weight: 500; /* По-плътен шрифт */
        }

        /* Зареждащ индикатор */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px; /* По-дебел индикатор */
            background: linear-gradient(to right, #4285f4, #34a853, #fbbc05, #ea4335);
            background-size: 400% 400%;
            animation: gradient 2s ease infinite;
            z-index: 1000;
            display: none;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Падащо меню за история */
        .history-dropdown {
            position: absolute;
            background: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: var(--shadow);
            width: 100%;
            max-height: 300px;
            overflow-y: auto;
            display: none;
            z-index: 100;
        }

        .history-item {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s;
        }

        .history-item:hover {
            background-color: var(--hover-color);
        }

        .history-item:last-child {
            border-bottom: none;
        }

        /* Секция за обратна връзка */
        .feedback-section {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 30px; /* По-голям padding */
            background-color: var(--feedback-bg);
            border-radius: 12px; /* По-заоблени ъгли */
            width: 90%;
            max-width: 550px; /* По-широк */
            z-index: 1000;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2); /* По-изразена сянка */
            display: none;
        }

        .feedback-section h3 {
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 20px;
            color: var(--accent-color);
            text-align: center;
        }

        .feedback-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .feedback-form textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px; /* По-заоблени ъгли */
            background-color: var(--primary-bg);
            color: var(--text-color);
            resize: vertical;
            min-height: 120px;
            font-size: 15px;
        }

        .feedback-form button {
            align-self: flex-end;
            padding: 10px 20px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
            font-weight: 500;
        }

        .feedback-form button:hover {
            background-color: #0f5ee3; /* По-тъмен син цвят при hover */
        }

        /* Овърлей */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.6); /* По-тъмен овърлей */
            z-index: 999;
            display: none;
        }
        
        /* Фуутър */
        .footer {
            background-color: var(--secondary-bg);
            padding: 18px;
            text-align: center;
            font-size: 14px;
            display: flex;
            justify-content: center;
            gap: 25px;
            flex-wrap: wrap;
            border-top: 1px solid var(--border-color); /* Лека горна рамка */
        }

        /* Модален прозорец за настройки */
        .settings-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--card-bg);
            border-radius: 16px; /* По-заоблени ъгли */
            width: 90%;
            max-width: 700px; /* По-широк */
            max-height: 85vh;
            overflow-y: auto;
            z-index: 1001;
            box-shadow: 0 15px 35px rgba(0,0,0,0.25); /* По-изразена сянка */
            display: none;
            padding: 30px;
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 18px;
            border-bottom: 1px solid var(--border-color);
        }

        .settings-header h2 {
            margin: 0;
            font-size: 24px; /* По-голям шрифт */
            color: var(--accent-color);
            font-weight: 500;
        }

        .close-settings {
            background: none;
            border: none;
            font-size: 30px; /* По-голям размер на бутона */
            cursor: pointer;
            color: var(--text-color);
            padding: 5px;
            border-radius: 50%;
            transition: background-color 0.2s;
        }

        .close-settings:hover {
            background-color: var(--hover-color);
        }

        .settings-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 25px;
        }

        .settings-tab {
            padding: 14px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent; /* По-дебела долна рамка */
            transition: all 0.2s;
            font-weight: 500;
            color: var(--text-color);
        }

        .settings-tab.active {
            border-bottom: 3px solid var(--accent-color);
            color: var(--accent-color);
            font-weight: 700;
        }

        .settings-tab:hover:not(.active) {
            background-color: var(--hover-color);
        }

        .settings-content {
            display: none;
        }

        .settings-content.active {
            display: block;
        }

        .settings-group {
            margin-bottom: 30px;
        }

        .settings-group h3 {
            margin-top: 0;
            margin-bottom: 18px;
            font-size: 18px;
            color: var(--accent-color);
            font-weight: 500;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-label {
            flex: 1;
        }

        .setting-label h4 {
            margin: 0 0 6px 0;
            font-size: 16px;
            font-weight: 400;
        }

        .setting-label p {
            margin: 0;
            font-size: 13px;
            color: var(--text-color);
            opacity: 0.7;
        }

        .setting-control {
            margin-left: 20px;
        }

        /* Превключвател (Switch) */
        .switch {
            position: relative;
            display: inline-block;
            width: 55px; /* По-широк */
            height: 28px; /* По-висок */
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 28px; /* По-заоблени ъгли */
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px; /* По-голям кръг */
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--accent-color);
        }

        input:checked + .slider:before {
            transform: translateX(27px); /* По-голямо преместване */
        }

        /* Стил на падащо меню */
        .select-style {
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            background-color: var(--primary-bg);
            color: var(--text-color);
            min-width: 180px;
            font-size: 15px;
            appearance: none; /* Премахване на стандартния стил */
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23666%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-6.5%200-12.3%203.2-16.1%208.1-3.8%204.9-4.7%2011.6-2.9%2017.7l139.3%20139.3c3.8%203.8%209%205.9%2014.5%205.9s10.7-2.1%2014.5-5.9L289.9%2095.1c3.8-3.8%204.7-10.5%202.9-16.6z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 10px top 50%;
            background-size: 12px auto;
            cursor: pointer;
        }

        .radio-group {
            display: flex;
            flex-direction: column; /* Вертикално подреждане */
            gap: 12px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
        }

        .radio-option input[type="radio"] {
            width: 18px;
            height: 18px;
            accent-color: var(--accent-color); /* Цвят на радио бутона */
        }

        /* Фуутър на настройките */
        .settings-footer {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .btn {
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            font-size: 15px;
        }

        .btn-primary {
            background-color: var(--accent-color);
            color: white;
            border: none;
        }

        .btn-primary:hover {
            background-color: #0f5ee3;
        }

        .btn-secondary {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .btn-secondary:hover {
            background-color: var(--hover-color);
        }

        /* Адаптивен дизайн */
        @media (max-width: 768px) {
            .quick-links {
                grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
                gap: 15px;
            }

            .search-options {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .footer {
                flex-direction: column;
                gap: 10px;
            }

            .header {
                gap: 10px;
            }

            .settings-modal {
                width: 95%;
                padding: 20px;
            }

            .setting-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .setting-control {
                margin-left: 0;
                margin-top: 10px;
                width: 100%;
            }

            .select-style {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="loader"></div>
    <div class="overlay" id="overlay"></div>

    <header class="header">
        <!-- Премахнат е уиджетът за времето -->
        <a href="https://mail.google.com" class="nav-link">Gmail</a>
        <a href="https://www.google.com/imghp" class="nav-link">Изображения</a>
        <a href="#" class="nav-link" id="feedbackLink">Обратна връзка</a>
        <button id="themeToggle">🌓</button>
    </header>
    
    <main class="main-content">
        <div class="logo">
            <img src="https://www.google.com/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png" alt="Bulglo Search" width="272" height="92" id="logoImage">
        </div>
        
        <div class="search-container">
            <form id="searchForm" class="search-box">
                <!-- Икона за търсене -->
                <svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="margin-right: 12px; fill: #9AA0A6;">
                    <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input type="text" id="searchInput" class="search-input" placeholder="Търсене в Bulglo или въвеждане на URL" autocomplete="off" autofocus>
                <!-- Икона за изчистване на търсенето -->
                <svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="cursor: pointer; margin-left: 12px; fill: #9AA0A6;" id="clearSearch">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
                </svg>
            </form>

            <div class="suggestions" id="suggestions"></div>
            <div class="history-dropdown" id="historyDropdown"></div>
            
            <div class="search-buttons">
                <button type="submit" form="searchForm" class="search-btn">Търсене в Bulglo</button>
                <button type="button" id="feelingLucky" class="search-btn">Чувствам се късметлия</button>
            </div>

            <div class="search-options">
                <label><input type="checkbox" id="safeSearch"> Безопасно търсене</label>
                <select id="language">
                    <option value="en">English</option>
                    <option value="bg">Български</option>
                    <option value="de">Deutsch</option>
                    <option value="fr">Français</option>
                    <option value="es">Español</option>
                </select>
            </div>
        </div>

        <div class="quick-links">
            <a href="https://youtube.com" class="quick-link">
                <img src="https://www.youtube.com/favicon.ico" alt="YouTube">
                <span>YouTube</span>
            </a>
            <a href="https://maps.google.com" class="quick-link">
                <img src="https://www.google.com/maps/favicon.ico" alt="Maps">
                <span>Карти</span>
            </a>
            <a href="https://drive.google.com" class="quick-link">
                <img src="https://drive.google.com/favicon.ico" alt="Drive">
                <span>Диск</span>
            </a>
            <a href="https://calendar.google.com" class="quick-link">
                <img src="https://calendar.google.com/favicon.ico" alt="Calendar">
                <span>Календар</span>
            </a>
            <a href="https://translate.google.com" class="quick-link">
                <img src="https://translate.google.com/favicon.ico" alt="Translate">
                <span>Преводач</span>
            </a>
        </div>

        <div class="feedback-section" id="feedbackSection">
            <h3>Помогнете ни да подобрим Google Clone</h3>
            <form class="feedback-form" id="feedbackForm">
                <textarea placeholder="Вашата обратна връзка..." required></textarea>
                <button type="submit">Изпрати</button>
            </form>
        </div>

        <!-- Нов модален прозорец за настройки -->
        <div class="settings-modal" id="settingsModal">
            <div class="settings-header">
                <h2>Настройки</h2>
                <button class="close-settings" id="closeSettings">&times;</button>
            </div>
            
            <div class="settings-tabs">
                <div class="settings-tab active" data-tab="general">Общи</div>
                <div class="settings-tab" data-tab="search">Търсене</div>
                <div class="settings-tab" data-tab="privacy">Поверителност</div>
            </div>
            
            <div class="settings-content active" id="generalTab">
                <div class="settings-group">
                    <h3>Външен вид</h3>
                    <div class="setting-item">
                        <div class="setting-label">
                            <h4>Тема</h4>
                            <p>Изберете между светъл, тъмен или системен режим</p>
                        </div>
                        <div class="setting-control">
                            <div class="radio-group">
                                <label class="radio-option">
                                    <input type="radio" name="appTheme" value="system" id="themeSystem">
                                    Системна
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="appTheme" value="light" id="themeLight">
                                    Светла
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="appTheme" value="dark" id="themeDark">
                                    Тъмна
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h3>Език и регион</h3>
                    <div class="setting-item">
                        <div class="setting-label">
                            <h4>Език на показване</h4>
                            <p>Променете езика, използван в интерфейса</p>
                        </div>
                        <div class="setting-control">
                            <select id="settingsLanguage" class="select-style">
                                <option value="en">English</option>
                                <option value="bg">Български</option>
                                <option value="de">Deutsch</option>
                                <option value="fr">Français</option>
                                <option value="es">Español</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="settings-content" id="searchTab">
                <div class="settings-group">
                    <h3>Настройки за търсене</h3>
                    <div class="setting-item">
                        <div class="setting-label">
                            <h4>Безопасно търсене</h4>
                            <p>Филтрирайте изрични резултати от вашите търсения</p>
                        </div>
                        <div class="setting-control">
                            <label class="switch">
                                <input type="checkbox" id="safeSearchSwitch">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <h4>Резултати от търсене на страница</h4>
                            <p>Брой резултати, показвани на всяка страница</p>
                        </div>
                        <div class="setting-control">
                            <select id="resultsPerPage" class="select-style">
                                <option value="10">10 резултата</option>
                                <option value="20">20 резултата</option>
                                <option value="30">30 резултата</option>
                                <option value="50">50 резултата</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <h4>Режим на търсене по подразбиране</h4>
                            <p>Изберете предпочитаното си поведение при търсене</p>
                        </div>
                        <div class="setting-control">
                            <div class="radio-group">
                                <label class="radio-option">
                                    <input type="radio" name="searchMode" value="standard" checked>
                                    Стандартно търсене
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="searchMode" value="instant">
                                    Незабавни резултати
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h3>История на търсенето</h3>
                    <div class="setting-item">
                        <div class="setting-label">
                            <h4>Запазване на историята на търсенето</h4>
                            <p>Съхранявайте предишните си търсения за бърз достъп</p>
                        </div>
                        <div class="setting-control">
                            <label class="switch">
                                <input type="checkbox" id="saveHistorySwitch" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="settings-content" id="privacyTab">
                <div class="settings-group">
                    <h3>Настройки за поверителност</h3>
                    <div class="setting-item">
                        <div class="setting-label">
                            <h4>Персонализирани реклами</h4>
                            <p>Показване на реклами въз основа на вашите интереси и история на търсенето</p>
                        </div>
                        <div class="setting-control">
                            <label class="switch">
                                <input type="checkbox" id="personalizedAdsSwitch">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <h4>Услуги за местоположение</h4>
                            <p>Разрешаване на уебсайтове да имат достъп до вашето местоположение за по-добри резултати</p>
                        </div>
                        <div class="setting-control">
                            <label class="switch">
                                <input type="checkbox" id="locationServicesSwitch">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h3>Данни и бисквитки</h3>
                    <div class="setting-item">
                        <div class="setting-label">
                            <h4>Изчистване на историята на търсенето</h4>
                            <p>Изтрийте всичките си предишно запазени търсения</p>
                        </div>
                        <div class="setting-control">
                            <button class="btn btn-secondary" id="clearHistoryBtn">Изчисти историята</button>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-label">
                            <h4>Изчистване на бисквитките</h4>
                            <p>Премахнете всички запазени бисквитки и данни за сайта</p>
                        </div>
                        <div class="setting-control">
                            <button class="btn btn-secondary" id="clearCookiesBtn">Изчисти бисквитките</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="settings-footer">
                <button class="btn btn-secondary" id="cancelSettings">Отказ</button>
                <button class="btn btn-primary" id="saveSettings">Запази промените</button>
            </div>
        </div>
    </main>
    
    <footer class="footer">
        <a href="https://policies.google.com/privacy" class="nav-link">Поверителност</a>
        <a href="https://policies.google.com/terms" class="nav-link">Условия</a>
        <a href="#" id="clearHistory" class="nav-link">Изчисти историята</a>
        <a href="#" id="settings" class="nav-link">Настройки</a>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM елементи
            const searchForm = document.getElementById('searchForm');
            const searchInput = document.getElementById('searchInput');
            const feelingLuckyBtn = document.getElementById('feelingLucky');
            const clearIcon = document.getElementById('clearSearch');
            const suggestionsBox = document.getElementById('suggestions');
            const themeToggle = document.getElementById('themeToggle');
            const logoImage = document.getElementById('logoImage');
            const loader = document.querySelector('.loader');
            const safeSearch = document.getElementById('safeSearch');
            const languageSelect = document.getElementById('language');
            const historyDropdown = document.getElementById('historyDropdown');
            const clearHistoryBtn = document.getElementById('clearHistory');
            const quickLinks = document.querySelectorAll('.quick-link');
            const feedbackLink = document.getElementById('feedbackLink');
            const feedbackSection = document.getElementById('feedbackSection');
            const feedbackForm = document.getElementById('feedbackForm');
            const settingsBtn = document.getElementById('settings');
            const overlay = document.getElementById('overlay');
            
            // Нови елементи на модалния прозорец за настройки
            const settingsModal = document.getElementById('settingsModal');
            const closeSettingsBtn = document.getElementById('closeSettings');
            const cancelSettingsBtn = document.getElementById('cancelSettings');
            const saveSettingsBtn = document.getElementById('saveSettings');
            const settingsTabs = document.querySelectorAll('.settings-tab');
            const settingsContents = document.querySelectorAll('.settings-content');
            
            // Елементи за избор на тема
            const themeRadioButtons = document.querySelectorAll('input[name="appTheme"]');
            const themeSystem = document.getElementById('themeSystem');
            const themeLight = document.getElementById('themeLight');
            const themeDark = document.getElementById('themeDark');

            const safeSearchSwitch = document.getElementById('safeSearchSwitch');
            const saveHistorySwitch = document.getElementById('saveHistorySwitch');
            const personalizedAdsSwitch = document.getElementById('personalizedAdsSwitch');
            const locationServicesSwitch = document.getElementById('locationServicesSwitch');
            const settingsLanguage = document.getElementById('settingsLanguage');
            const resultsPerPage = document.getElementById('resultsPerPage');
            const clearHistoryBtnModal = document.getElementById('clearHistoryBtn');
            const clearCookiesBtn = document.getElementById('clearCookiesBtn');

            // Media query за предпочитана цветова схема на системата
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');

            // Инициализиране на темата от localStorage или системните предпочитания
            function initializeTheme() {
                let storedThemePreference = localStorage.getItem('themePreference') || 'system';
                
                // Проверяваме радио бутоните в настройките
                if (storedThemePreference === 'system') {
                    themeSystem.checked = true;
                    applyTheme(prefersDarkScheme.matches ? 'dark' : 'light');
                } else if (storedThemePreference === 'light') {
                    themeLight.checked = true;
                    applyTheme('light');
                } else { // 'dark'
                    themeDark.checked = true;
                    applyTheme('dark');
                }
                updateThemeToggleButtonIcon();
            }

            // Прилагане на темата
            function applyTheme(mode) {
                if (mode === 'dark') {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            }

            // Актуализиране на иконата на бутона за превключване на тема
            function updateThemeToggleButtonIcon() {
                const currentTheme = localStorage.getItem('themePreference') || 'system';
                if (currentTheme === 'dark' || (currentTheme === 'system' && prefersDarkScheme.matches)) {
                    themeToggle.textContent = '☀️'; // Слънце за тъмен режим
                } else {
                    themeToggle.textContent = '🌓'; // Полумесец за светъл режим
                }
            }

            // Слушател за промени в системните предпочитания за цвят
            prefersDarkScheme.addEventListener('change', (e) => {
                if (localStorage.getItem('themePreference') === 'system') {
                    applyTheme(e.matches ? 'dark' : 'light');
                    updateThemeToggleButtonIcon();
                }
            });

            // Инициализиране на темата при зареждане на страницата
            initializeTheme();

            // Инициализиране на езика от localStorage
            if (localStorage.getItem('language')) {
                languageSelect.value = localStorage.getItem('language');
                settingsLanguage.value = localStorage.getItem('language');
            }

            // Инициализиране на безопасно търсене от localStorage
            if (localStorage.getItem('safeSearch') === 'true') {
                safeSearch.checked = true;
                safeSearchSwitch.checked = true;
            }

            // Инициализиране на настройката за история на търсенето
            if (localStorage.getItem('saveHistory') === 'false') {
                saveHistorySwitch.checked = false;
            } else {
                saveHistorySwitch.checked = true;
            }

            // Инициализиране на резултатите на страница
            if (localStorage.getItem('resultsPerPage')) {
                resultsPerPage.value = localStorage.getItem('resultsPerPage');
            }

            // Инициализиране на режима на търсене
            if (localStorage.getItem('searchMode')) {
                document.querySelector(`input[name="searchMode"][value="${localStorage.getItem('searchMode')}"]`).checked = true;
            }

            // Зареждане на историята на търсенето
            loadSearchHistory();

            // Превключване на тема чрез бутона в хедъра
            themeToggle.addEventListener('click', function() {
                let currentPreference = localStorage.getItem('themePreference') || 'system';
                let newPreference;

                if (currentPreference === 'system') {
                    newPreference = 'light';
                } else if (currentPreference === 'light') {
                    newPreference = 'dark';
                } else { // currentPreference === 'dark'
                    newPreference = 'system';
                }
                localStorage.setItem('themePreference', newPreference);
                
                // Актуализираме радио бутоните в настройките
                document.getElementById(`theme${newPreference.charAt(0).toUpperCase() + newPreference.slice(1)}`).checked = true;
                
                initializeTheme(); // Прилагаме новата тема
            });

            // Слушатели за промяна на радио бутоните за тема в настройките
            themeRadioButtons.forEach(radio => {
                radio.addEventListener('change', function() {
                    localStorage.setItem('themePreference', this.value);
                    initializeTheme(); // Прилагаме новата тема
                });
            });

            // Изчистване на входящото поле за търсене
            clearIcon.addEventListener('click', function() {
                searchInput.value = '';
                searchInput.focus();
                suggestionsBox.style.display = 'none';
            });

            // Показване на историята на търсенето, когато полето е на фокус
            searchInput.addEventListener('focus', function() {
                if (searchInput.value === '') {
                    showSearchHistory();
                }
            });

            // Скриване на историята при клик извън полето
            document.addEventListener('click', function(e) {
                if (!searchInput.contains(e.target) && !historyDropdown.contains(e.target)) {
                    historyDropdown.style.display = 'none';
                }
            });

            // Обработка на изпращане на формуляра за търсене
            searchForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const query = searchInput.value.trim();
                if (query) {
                    performSearch(query);
                }
            });

            // Обработка на бутона "Чувствам се късметлия"
            feelingLuckyBtn.addEventListener('click', function() {
                const query = searchInput.value.trim();
                if (query) {
                    saveToHistory(query);
                    showLoader();
                    window.location.href = `https://www.google.com/search?q=${encodeURIComponent(query)}&btnI=I'm+Feeling+Lucky${getSearchOptions()}`;
                }
            });

            // Обработка на натискане на Enter в полето за търсене
            searchInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const query = searchInput.value.trim();
                    if (query) {
                        performSearch(query);
                    }
                }
            });

            // Клавишни комбинации
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'k') {
                    e.preventDefault();
                    searchInput.focus();
                }
                if (e.key === 'Escape') {
                    searchInput.blur();
                    suggestionsBox.style.display = 'none';
                    historyDropdown.style.display = 'none';
                    closeFeedback();
                    closeSettings();
                }
            });

            // Предложения за автоматично довършване
            searchInput.addEventListener('input', async function() {
                const query = this.value.trim();
                
                if (query === '') {
                    suggestionsBox.style.display = 'none';
                    showSearchHistory();
                    return;
                }
                
                if (query.length > 2) {
                    const suggestions = await fetchSuggestions(query);
                    showSuggestions(suggestions);
                } else {
                    suggestionsBox.style.display = 'none';
                }
            });

            // Промяна на безопасно търсене и език
            safeSearch.addEventListener('change', function() {
                localStorage.setItem('safeSearch', this.checked);
                safeSearchSwitch.checked = this.checked;
            });

            safeSearchSwitch.addEventListener('change', function() {
                localStorage.setItem('safeSearch', this.checked);
                safeSearch.checked = this.checked;
            });

            languageSelect.addEventListener('change', function() {
                localStorage.setItem('language', this.value);
                settingsLanguage.value = this.value;
            });

            settingsLanguage.addEventListener('change', function() {
                localStorage.setItem('language', this.value);
                languageSelect.value = this.value;
            });

            // Бутон за изчистване на историята
            clearHistoryBtn.addEventListener('click', function(e) {
                e.preventDefault();
                // Използване на confirm за потвърждение (в реално приложение би било персонализиран модал)
                if (confirm('Сигурни ли сте, че искате да изчистите историята си на търсене?')) {
                    clearSearchHistory();
                }
            });

            clearHistoryBtnModal.addEventListener('click', function(e) {
                e.preventDefault();
                // Използване на confirm за потвърждение (в реално приложение би било персонализиран модал)
                if (confirm('Сигурни ли сте, че искате да изчистите историята си на търсене?')) {
                    clearSearchHistory();
                }
            });

            function clearSearchHistory() {
                localStorage.removeItem('searchHistory');
                historyDropdown.style.display = 'none';
                showToast('Историята на търсенето е изчистена');
            }

            // Бутон за изчистване на бисквитките
            clearCookiesBtn.addEventListener('click', function(e) {
                e.preventDefault();
                // В реално приложение, тук бихте изчистили бисквитките
                // Използване на confirm за потвърждение (в реално приложение би било персонализиран модал)
                if (confirm('Сигурни ли сте, че искате да изчистите всички бисквитки и данни за сайта?')) {
                    showToast('Бисквитките и данните за сайта са изчистени');
                }
            });

            // Анимация на бързите връзки
            quickLinks.forEach(link => {
                link.addEventListener('mouseenter', function() {
                    this.querySelector('img').style.transform = 'scale(1.1)';
                });
                link.addEventListener('mouseleave', function() {
                    this.querySelector('img').style.transform = 'scale(1)';
                });
            });

            // Връзка за обратна връзка
            feedbackLink.addEventListener('click', function(e) {
                e.preventDefault();
                openFeedback();
            });

            // Изпращане на формуляра за обратна връзка
            feedbackForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const feedbackText = this.querySelector('textarea').value.trim();
                if (feedbackText) {
                    // В реално приложение, това би било изпратено към вашия сървър
                    console.log('Изпратена обратна връзка:', feedbackText);
                    this.querySelector('textarea').value = '';
                    closeFeedback();
                    showToast('Благодарим ви за обратната връзка!');
                }
            });

            // Бутон за настройки
            settingsBtn.addEventListener('click', function(e) {
                e.preventDefault();
                openSettings();
            });

            // Затваряне на настройките
            closeSettingsBtn.addEventListener('click', closeSettings);
            cancelSettingsBtn.addEventListener('click', closeSettings);
            overlay.addEventListener('click', closeSettings); // Затваряне при клик върху овърлея

            // Запазване на настройките
            saveSettingsBtn.addEventListener('click', function() {
                localStorage.setItem('saveHistory', saveHistorySwitch.checked);
                localStorage.setItem('personalizedAds', personalizedAdsSwitch.checked);
                localStorage.setItem('locationServices', locationServicesSwitch.checked);
                localStorage.setItem('resultsPerPage', resultsPerPage.value);
                localStorage.setItem('searchMode', document.querySelector('input[name="searchMode"]:checked').value);
                
                showToast('Настройките са запазени успешно');
                closeSettings();
            });

            // Табове за настройки
            settingsTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Премахване на активен клас от всички табове и съдържание
                    settingsTabs.forEach(t => t.classList.remove('active'));
                    settingsContents.forEach(c => c.classList.remove('active'));
                    
                    // Добавяне на активен клас към кликнатия таб и съответното съдържание
                    this.classList.add('active');
                    document.getElementById(`${tabId}Tab`).classList.add('active');
                });
            });

            // Затваряне на обратна връзка при клик върху овърлея
            overlay.addEventListener('click', closeFeedback);

            // Функции
            function openSettings() {
                settingsModal.style.display = 'block';
                overlay.style.display = 'block';
            }

            function closeSettings() {
                settingsModal.style.display = 'none';
                overlay.style.display = 'none';
            }

            function openFeedback() {
                feedbackSection.style.display = 'block';
                overlay.style.display = 'block';
            }

            function closeFeedback() {
                feedbackSection.style.display = 'none';
                overlay.style.display = 'none';
            }

            async function fetchSuggestions(query) {
                try {
                    const response = await fetch(`https://suggestqueries.google.com/complete/search?client=firefox&q=${encodeURIComponent(query)}`);
                    const data = await response.json();
                    return data[1];
                } catch (error) {
                    console.error('Грешка при извличане на предложения:', error);
                    return [];
                }
            }

            function showSuggestions(suggestions) {
                if (suggestions.length === 0) {
                    suggestionsBox.style.display = 'none';
                    return;
                }

                suggestionsBox.innerHTML = '';
                suggestions.forEach(suggestion => {
                    const suggestionItem = document.createElement('div');
                    suggestionItem.className = 'suggestion-item';
                    suggestionItem.textContent = suggestion;
                    suggestionItem.addEventListener('click', function() {
                        searchInput.value = suggestion;
                        performSearch(suggestion);
                    });
                    suggestionsBox.appendChild(suggestionItem);
                });

                suggestionsBox.style.display = 'block';
                historyDropdown.style.display = 'none';
            }

            function performSearch(query) {
                saveToHistory(query);
                showLoader();
                animateLogo();
                // Пренасочване към Google Search с опции
                window.location.href = `https://www.google.com/search?q=${encodeURIComponent(query)}${getSearchOptions()}`;
            }

            function getSearchOptions() {
                let options = '';
                if (safeSearch.checked) {
                    options += '&safe=active';
                }
                if (languageSelect.value) {
                    options += `&hl=${languageSelect.value}`;
                }
                if (localStorage.getItem('resultsPerPage')) {
                    options += `&num=${localStorage.getItem('resultsPerPage')}`;
                }
                return options;
            }

            function saveToHistory(query) {
                if (saveHistorySwitch && !saveHistorySwitch.checked) return;
                
                let history = JSON.parse(localStorage.getItem('searchHistory')) || [];
                // Премахване, ако вече съществува
                history = history.filter(item => item.toLowerCase() !== query.toLowerCase());
                history.unshift(query); // Добавяне в началото
                history = history.slice(0, 10); // Ограничаване до 10 елемента
                localStorage.setItem('searchHistory', JSON.stringify(history));
            }

            function loadSearchHistory() {
                const history = JSON.parse(localStorage.getItem('searchHistory')) || [];
                return history;
            }

            function showSearchHistory() {
                if (saveHistorySwitch && !saveHistorySwitch.checked) {
                    historyDropdown.style.display = 'none';
                    return;
                }
                
                const history = loadSearchHistory();
                if (history.length === 0) {
                    historyDropdown.style.display = 'none';
                    return;
                }

                historyDropdown.innerHTML = '';
                history.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    historyItem.textContent = item;
                    historyItem.addEventListener('click', function() {
                        searchInput.value = item;
                        performSearch(item);
                    });
                    historyDropdown.appendChild(historyItem);
                });

                historyDropdown.style.display = 'block';
                suggestionsBox.style.display = 'none';
            }

            function showLoader() {
                loader.style.display = 'block';
                setTimeout(() => {
                    loader.style.display = 'none';
                }, 2000);
            }

            function animateLogo() {
                logoImage.style.transform = 'scale(0.9)';
                logoImage.style.transition = 'transform 0.3s ease';
                setTimeout(() => {
                    logoImage.style.transform = 'scale(1)';
                }, 300);
            }

            function showToast(message) {
                const toast = document.createElement('div');
                toast.textContent = message;
                toast.style.position = 'fixed';
                toast.style.bottom = '20px';
                toast.style.left = '50%';
                toast.style.transform = 'translateX(-50%)';
                toast.style.backgroundColor = 'var(--accent-color)';
                toast.style.color = 'white';
                toast.style.padding = '10px 20px';
                toast.style.borderRadius = '4px';
                toast.style.zIndex = '1000';
                toast.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.opacity = '0';
                    toast.style.transition = 'opacity 0.5s';
                    setTimeout(() => {
                        document.body.removeChild(toast);
                    }, 500);
                }, 3000);
            }
        });
    </script>
</body>
</html>